<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ r.verdict }} â€¢ Fact-Check</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color-scheme: light dark; }
    body { margin: 0; padding: 24px; max-width: 900px; }
    .badge { display:inline-block; padding:4px 10px; border-radius:999px; font-weight:600; font-size:14px; }
    .True { background:#e6ffed; color:#05620d; border:1px solid #b1f0b8; }
    .False { background:#ffe8e6; color:#7b1010; border:1px solid #f3b3ad; }
    .Misleading { background:#fff6e0; color:#6a4b00; border:1px solid #f3d49a; }
    .Unverified { background:#eef2f7; color:#3b4252; border:1px solid #d0d7e2; }
    .card { border:1px solid #e5e7eb; border-radius:12px; padding:16px; margin:12px 0; }
    .muted { color:#6b7280; font-size:14px; }
    .sources li{ margin: 6px 0; }
    code, pre { background:#f6f8fa; padding:8px; border-radius:8px; display:block; overflow:auto; }
    button { padding:8px 12px; border-radius:8px; border:1px solid #d1d5db; cursor:pointer; }
  </style>
</head>
<body>
  <h1 class="muted">Automated Fact-Check</h1>
  <div class="card">
    <div><span class="badge {{ r.verdict }}">{{ r.verdict }}</span></div>
    <h2 style="margin:10px 0 6px 0;">Claim</h2>
    <p>{{ r.claim }}</p>
    <h3 style="margin:10px 0 6px 0;">Rationale</h3>
    <p>{{ r.rationale }}</p>
    <div class="muted">Confidence: {{ '%.2f' % r.confidence }}</div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 6px 0;">Ready-to-post</h3>
    <pre id="post">{{ r.post }}</pre>
    <button onclick="copyPost()">Copy</button>
  </div>

  <div class="card">
    <h3 style="margin:0 0 6px 0;">Sources</h3>
    <ol class="sources">
      {% for s in r.sources %}
      <li>
        <a href="{{ s.url }}" target="_blank" rel="noopener">{{ s.title }}</a>
        {% if s.snippet %}<div class="muted">{{ s.snippet }}</div>{% endif %}
        {% if s.evidence and s.evidence|length > 0 %}
          <details><summary>evidence</summary>
            <ul>
              {% for ev in s.evidence %}
              <li>{{ ev }}</li>
              {% endfor %}
            </ul>
          </details>
        {% endif %}
      </li>
      {% endfor %}
    </ol>
  </div>

  <script>
    function copyPost() {
      const txt = document.getElementById('post').innerText;
      navigator.clipboard.writeText(txt);
    }
  </script>
</body>
</html>
